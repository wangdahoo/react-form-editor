!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("antd/es/layout/style/css"),require("antd/es/layout"),require("react"),require("react-dnd"),require("react-dnd-html5-backend"),require("antd/es/modal/style/css"),require("antd/es/modal"),require("antd/es/button/style/css"),require("antd/es/button"),require("mobx-react"),require("antd/es/divider/style/css"),require("antd/es/divider"),require("antd/es/empty/style/css"),require("antd/es/empty"),require("antd/es/input-number/style/css"),require("antd/es/input-number"),require("antd/es/checkbox/style/css"),require("antd/es/checkbox"),require("antd/es/select/style/css"),require("antd/es/select"),require("antd/es/input/style/css"),require("antd/es/input"),require("antd/es/radio/style/css"),require("antd/es/radio"),require("antd/es/message/style/css"),require("antd/es/message"),require("mobx"),require("shortid"),require("immutability-helper"),require("classnames"),require("antd/es/row/style/css"),require("antd/es/row"),require("antd/es/col/style/css"),require("antd/es/col"),require("antd/es/tabs/style/css"),require("antd/es/tabs"),require("antd/es/list/style/css"),require("antd/es/list")):"function"==typeof define&&define.amd?define(["antd/es/layout/style/css","antd/es/layout","react","react-dnd","react-dnd-html5-backend","antd/es/modal/style/css","antd/es/modal","antd/es/button/style/css","antd/es/button","mobx-react","antd/es/divider/style/css","antd/es/divider","antd/es/empty/style/css","antd/es/empty","antd/es/input-number/style/css","antd/es/input-number","antd/es/checkbox/style/css","antd/es/checkbox","antd/es/select/style/css","antd/es/select","antd/es/input/style/css","antd/es/input","antd/es/radio/style/css","antd/es/radio","antd/es/message/style/css","antd/es/message","mobx","shortid","immutability-helper","classnames","antd/es/row/style/css","antd/es/row","antd/es/col/style/css","antd/es/col","antd/es/tabs/style/css","antd/es/tabs","antd/es/list/style/css","antd/es/list"],t):(e=e||self).ReactFormEditor=t(null,e._Layout,e.React,e.ReactDnD,e.ReactDnDHTML5Backend,null,e._Modal,null,e._Button,e.mobxReact,null,e._Divider,null,e._Empty,null,e._InputNumber,null,e._Checkbox,null,e._Select,null,e._Input,null,e._Radio,null,e._message,e.mobx,e.shortid,e.update,e.classnames,null,e._Row,null,e._Col,null,e._Tabs,null,e._List)}(this,(function(e,t,n,a,r,l,i,u,c,o,s,m,d,f,p,v,y,E,b,h,g,O,T,N,C,x,A,w,k,I,S,R,D,j,q,P,U,B){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var W,L,X,z,H="default"in n?n.default:n;function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function K(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Z(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ee(e){return function(){var t,n=J(e);if(Q()){var a=J(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return Z(this,t)}}function te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,r=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(a=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(r)throw l}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ae(e,t,n,a){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(a):void 0})}function re(e,t,n,a,r){var l={};return Object.keys(a).forEach((function(e){l[e]=a[e]})),l.enumerable=!!l.enumerable,l.configurable=!!l.configurable,("value"in l||l.initializer)&&(l.writable=!0),l=n.slice().reverse().reduce((function(n,a){return a(e,t,n)||n}),l),r&&void 0!==l.initializer&&(l.value=l.initializer?l.initializer.call(r):void 0,l.initializer=void 0),void 0===l.initializer&&(Object.defineProperty(e,t,l),l=null),l}r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i,c=c&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c,m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m,f=f&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f,v=v&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v,E=E&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E,h=h&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h,O=O&&Object.prototype.hasOwnProperty.call(O,"default")?O.default:O,N=N&&Object.prototype.hasOwnProperty.call(N,"default")?N.default:N,x=x&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x,k=k&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k,I=I&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I,R=R&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R,j=j&&Object.prototype.hasOwnProperty.call(j,"default")?j.default:j,P=P&&Object.prototype.hasOwnProperty.call(P,"default")?P.default:P,B=B&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B,function(e){e.TEXT="text",e.INPUT="input",e.NUMBER="number",e.TEXTAREA="textarea",e.CHECKBOX="checkbox",e.RADIO="radio",e.SELECT="select",e.LAYOUT="layout",e.RESULT="result"}(z||(z={}));var le=function(e){return{value:e,text:e}};var ie=new(L=re((W=function(){function e(){V(this,e),ae(this,"items",L,this),ae(this,"activeId",X,this)}return K(e,[{key:"setItems",value:function(e){this.items=e,this.activeId=""}},{key:"getItems",value:function(){return this.items.slice(0)}},{key:"add",value:function(e){if(e===z.RESULT&&this.items.filter((function(e){return e.itemType===z.RESULT})).length>0)x.error("检验结果字段只能有一个");else{var t=function(e){var t=w.generate();switch(e){case z.RESULT:return{id:t,itemType:e,labelText:"检验结果"};case z.TEXT:return{id:t,itemType:e,content:"文字内容",fontSize:14,lineHeight:21,textAlign:"left"};case z.LAYOUT:return{id:t,itemType:e,rows:[[{span:12},{span:12}]]};case z.SELECT:return{id:t,itemType:e,labelText:"下拉选择框",options:[le("选项 1"),le("选项 2"),le("选项 3")],defaultValue:"选项 1"};case z.RADIO:return{id:t,itemType:e,labelText:"单选框",options:[le("选项 1"),le("选项 2")],buttonStyle:"solid",defaultValue:"",required:!0};case z.CHECKBOX:return{id:t,itemType:e,labelText:"多选框",options:[le("选项 1")],defaultValue:[],required:!0};case z.TEXTAREA:return{id:t,itemType:e,labelText:"文本域",placeholder:"文本域输入提示",defaultValue:"",required:!0};case z.NUMBER:return{id:t,itemType:e,labelText:"数字框",defaultValue:1,min:1,max:100,unit:""};default:return{id:t,itemType:z.INPUT,labelText:"文本框",placeholder:"文本框输入提示",defaultValue:"",required:!0}}}(e);this.items.push(t)}}},{key:"delete",value:function(e){this.items=this.items.filter((function(t){return t.id!==e}))}},{key:"update",value:function(e){this.items=this.items.map((function(t){return t.id===e.id?e:t}))}},{key:"activate",value:function(e){this.items.filter((function(t){return t.id===e})).length>0&&(this.activeId=e)}},{key:"move",value:function(e,t){var n=this.items[e];this.items=k(this.items,{$splice:[[e,1],[t,0,n]]})}},{key:"addOption",value:function(e){this.items=this.items.map((function(t){if(t.id===e&&[z.CHECKBOX,z.RADIO,z.SELECT].indexOf(t.itemType)>-1){t.options.push(le(""))}return t}))}},{key:"deleteOption",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&[z.CHECKBOX,z.RADIO,z.SELECT].indexOf(n.itemType)>-1&&(n.options.length>1?(n.options.splice(t,1),z.SELECT===n.itemType&&(n.defaultValue=n.options[0].value),z.CHECKBOX===n.itemType&&(n.defaultValue=[]),z.RADIO===n.itemType&&(n.defaultValue="")):x.error("选项不得少于 1 个")),n}))}},{key:"updateOption",value:function(e,t,n){this.items=this.items.map((function(a){return a.id===e&&[z.CHECKBOX,z.RADIO,z.SELECT].indexOf(a.itemType)>-1&&a.options.splice(t,1,le(n)),a}))}},{key:"setCheckboxDefaultOption",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&z.CHECKBOX===n.itemType&&(n.defaultValue=t),n}))}},{key:"setRadioDefaultOption",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&z.RADIO===n.itemType&&(n.defaultValue=t),n}))}},{key:"setSelectDefaultOption",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&z.SELECT===n.itemType&&(n.defaultValue=t),n}))}},{key:"addCol",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&z.LAYOUT===n.itemType&&n.rows[t].push({span:12}),n}))}},{key:"updateColSpan",value:function(e,t,n,a){this.items=this.items.map((function(r){return r.id===e&&z.LAYOUT===r.itemType&&r.rows[t].splice(n,1,{span:a}),r}))}},{key:"deleteCol",value:function(e,t,n){this.items=this.items.map((function(a){return a.id===e&&z.LAYOUT===a.itemType&&a.rows[t].splice(n,1),a}))}},{key:"updateTextItem",value:function(e,t,n,a,r){this.items=this.items.map((function(l){return l.id===e&&z.TEXT===l.itemType&&(l.content=t,l.fontSize=n,l.lineHeight=a,l.textAlign=r),l}))}},{key:"setRequired",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&(n.required=t),n}))}},{key:"formItems",get:function(){var e=this;return this.items.map((function(t){return G({},t,{isActive:t.id===e.activeId})}))}},{key:"activeItem",get:function(){return function(e,t){for(var n=null,a=0,r=e.length;a<r;a++){var l=e[a];if(l.id===t){n=l;break}}return n||{}}(this.items,this.activeId)}}]),e}()).prototype,"items",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=re(W.prototype,"activeId",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W),ue=function(e){return{values:e.reduce((function(e,t){return[z.INPUT,z.TEXTAREA,z.RADIO,z.CHECKBOX,z.SELECT].indexOf(t.itemType)>-1?G({},e,F({},t.id,t.defaultValue)):e}),{}),result:-1,comment:""}};function ce(e){var t=e.form,a=t.items,r=t.attrs,l=r.formWidth,i=r.formWidthUnit,u=r.labelAlign,o=r.labelWidth,s=te(n.useState(ue(a)),2),d=s[0],p=s[1],y=te(n.useState({result:!1,errors:{}}),2),b=y[0],g=y[1],T=te(n.useState(0),2),C=T[0],x=T[1];return 0===a.length?H.createElement(f,null):H.createElement("div",{className:"generated-form",style:{width:"".concat(l).concat(i)}},a.map((function(e,t){var n=e.itemType;if(n===z.TEXT){var a=e;return H.createElement("div",{key:t,className:"form-item form-item-text",style:{fontSize:a.fontSize,lineHeight:"".concat(a.lineHeight,"px"),textAlign:a.textAlign}},H.createElement("div",{className:"form-item-label"},a.content))}if([z.INPUT,z.NUMBER,z.TEXTAREA,z.RADIO,z.CHECKBOX,z.SELECT,z.RESULT].indexOf(n)>-1){var r=b.errors[e.id];return H.createElement("div",{className:"form-item",key:t},H.createElement("div",{className:I("form-item-label","top"===u?"label-standalone":""),style:G({width:o},"top"!==u?{textAlign:u}:{})},e.labelText),H.createElement("div",{className:"form-item-content"},function(e){switch(e.itemType){case z.RESULT:return H.createElement("div",null,H.createElement(N.Group,{style:{height:32,lineHeight:"32px",marginBottom:16},value:d.result,onChange:function(e){return p(G({},d,{result:e.target.value}))}},H.createElement(N,{value:1},"合格"),H.createElement(N,{value:0},"不合格"),H.createElement("span",{className:"err-msg"},C>0&&-1===d.result?"检验结果为必填项":"")),H.createElement(O.TextArea,{placeholder:"备注",value:d.comment,onChange:function(e){return p(G({},d,{comment:e.target.value}))}}));case z.SELECT:var t=e;return H.createElement(h,{value:d.values[t.id],onChange:function(e){var n=d.values;p(G({},d,{values:G({},n,F({},t.id,e))}))},style:{width:"100%"}},t.options.map((function(e,t){return H.createElement(h.Option,{key:t,value:e.value},e.text)})));case z.CHECKBOX:var n=e;return H.createElement(E.Group,{value:d.values[n.id],onChange:function(e){var t=d.values;p(G({},d,{values:G({},t,F({},n.id,e))}))}},n.options.map((function(e,t){return H.createElement(E,{key:t,value:e.value},e.text)})));case z.RADIO:var a=e;return H.createElement(N.Group,{value:d.values[a.id],onChange:function(e){var t=d.values;p(G({},d,{values:G({},t,F({},a.id,e.target.value))}))},buttonStyle:a.buttonStyle},a.options.map((function(e,t){return H.createElement(N.Button,{key:t,value:e.value},e.text)})));case z.TEXTAREA:var r=e;return H.createElement(O.TextArea,{value:d.values[r.id],onChange:function(e){var t=d.values;p(G({},d,{values:G({},t,F({},r.id,e.target.value))}))},placeholder:r.placeholder});case z.NUMBER:var l=e;return H.createElement(v,{style:{width:"100%"},value:d.values[l.id],onChange:function(e){e=e||l.min;var t=d.values;p(G({},d,{values:G({},t,F({},l.id,e))}))},min:l.min,max:l.max,formatter:function(e){return e?"".concat(e," ").concat(l.unit):"".concat(l.min," ").concat(l.unit)},parser:function(e){return Number(e?e.replace(" ".concat(l.unit),""):l.min)}});default:var i=e;return H.createElement(O,{value:d.values[i.id],onChange:function(e){var t=d.values;p(G({},d,{values:G({},t,F({},i.id,e.target.value))}))},placeholder:i.placeholder})}}(e),H.createElement("div",{className:"err-msg"},r)))}return null})),H.createElement(m,null),H.createElement("div",{style:{paddingLeft:o}},H.createElement(c,{type:"primary",onClick:function(){console.log("form items =>",a),console.log("form values =>",d);var t=function(e,t){var n=t.values;return e.reduce((function(e,a){var r=e.result,l=e.errors;if(function(e){return[z.INPUT,z.TEXTAREA,z.CHECKBOX,z.RADIO].indexOf(e.itemType)>-1}(a)&&a.required){var i=a,u=i.id,c=i.labelText,o=n[u];("string"==typeof o&&""===o||"[object Array]"===Object.prototype.toString.call(o)&&0===o.length)&&(l[u]="".concat(c,"为必填项"),r=!1)}return a.itemType===z.RESULT&&t.result,{result:r,errors:l}}),{result:!1,errors:{}})}(a,d);console.log(t),t.result?(e.onSubmit&&e.onSubmit(d),g({result:!1,errors:{}}),p(ue(a))):g(t),x(C+1)},style:{width:90,marginRight:16}},"提 交"),H.createElement(c,{type:"default",onClick:function(){return p(ue(a))},style:{width:90}},"重 置")))}var oe=o.observer((function(e){var t=e.form,a=e.formAttrs,r=e.onSave,l=te(n.useState(!1),2),u=l[0],o=l[1],s=function(){return JSON.stringify({items:t.getItems(),attrs:a})};return H.createElement("div",{className:"form-editor-toolbar-content"},H.createElement(c,{type:"link",icon:"eye",onClick:function(){o(!0)}},"预览"),H.createElement(c,{type:"link",icon:"save",onClick:function(){return r(s())}},"保存"),H.createElement(i,{title:"表单预览",centered:!0,visible:u,onCancel:function(){return o(!1)},footer:null,width:800},u?H.createElement(ce,{form:JSON.parse(s())}):null))})),se="field",me="eidtable_field";var de,fe=o.observer((function(e){var t=e.name,n=e.text,r=te(a.useDrag({item:{name:t,type:se},collect:function(e){return{isDragging:e.isDragging()}}}),2),l=r[0].isDragging,i=r[1];return H.createElement("div",{ref:i,className:"field",style:{opacity:l?.4:1}},n)})),pe=[{name:"input",text:"文本框"},{name:"number",text:"数字框"},{name:"textarea",text:"文本域"},{name:"radio",text:"单选框"},{name:"checkbox",text:"多选框"},{name:"select",text:"下拉选择框"},{name:"text",text:"文字"}],ve=[{name:"result",text:"检验结果"}];function ye(){var e=function(e,t){return H.createElement("div",null,H.createElement("div",{className:"label"},e),t.map((function(e,t,n){if(t%2==0){var a=n.slice(t,t+2);return H.createElement(R,{gutter:10,key:t},a.map((function(e,n){return H.createElement(j,{span:12,key:"".concat(t,"-").concat(n)},H.createElement(fe,{name:e.name,text:e.text}))})))}return null})))};return H.createElement(H.Fragment,null,e("通用字段",pe),e("自定义字段",ve))}var Ee,be,he,ge,Oe,Te,Ne=o.observer(de=function(e){Y(n,e);var t=ee(n);function n(){return V(this,n),t.apply(this,arguments)}return K(n,[{key:"render",value:function(){var e=this.props.formAttrs;return H.createElement("div",{className:"attrs"},H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"表单宽度"),H.createElement(v,{className:"input",value:e.formWidth,min:0,step:1,onChange:function(t){void 0!==t&&(e.formWidth=t)}})),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"表单宽度单位"),H.createElement(N.Group,{className:"input",value:e.formWidthUnit,buttonStyle:"solid",onChange:function(t){e.formWidthUnit=t.target.value}},H.createElement(N.Button,{value:"%"},"百分比 %"),H.createElement(N.Button,{value:"px"},"像素 px "))),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"标签宽度"),H.createElement(v,{className:"input",value:e.labelWidth,min:0,step:1,onChange:function(t){void 0!==t&&(e.labelWidth=t)}})),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"标签宽度单位"),H.createElement(N.Group,{className:"input",value:e.labelWidthUnit,buttonStyle:"solid",onChange:function(t){e.labelWidthUnit=t.target.value}},H.createElement(N.Button,{value:"%"},"百分比 %"),H.createElement(N.Button,{value:"px"},"像素 px "))),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"标签对齐方式"),H.createElement(N.Group,{className:"input",value:e.labelAlign,buttonStyle:"solid",onChange:function(t){e.labelAlign=t.target.value}},H.createElement(N.Button,{value:"left"},"左对齐"),H.createElement(N.Button,{value:"right"},"右对齐"),H.createElement(N.Button,{value:"top"},"顶部对齐"))))}}]),n}(H.Component))||de,Ce=new(be=re((Ee=function(){function e(){V(this,e),ae(this,"formWidth",be,this),ae(this,"formWidthUnit",he,this),ae(this,"labelAlign",ge,this),ae(this,"labelWidth",Oe,this),ae(this,"labelWidthUnit",Te,this)}return K(e,[{key:"reset",value:function(e){this.formWidth=e.formWidth||100,this.labelAlign=e.labelAlign||"left",this.labelWidth=e.labelWidth||100,this.labelWidthUnit=e.labelWidthUnit||"px"}},{key:"formWidthString",get:function(){return"".concat(this.formWidth).concat(this.formWidthUnit)}},{key:"labelWidthString",get:function(){return"".concat(this.labelWidth).concat(this.labelWidthUnit)}}]),e}()).prototype,"formWidth",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),he=re(Ee.prototype,"formWidthUnit",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"%"}}),ge=re(Ee.prototype,"labelAlign",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"left"}}),Oe=re(Ee.prototype,"labelWidth",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),Te=re(Ee.prototype,"labelWidthUnit",[A.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"px"}}),re(Ee.prototype,"formWidthString",[A.computed],Object.getOwnPropertyDescriptor(Ee.prototype,"formWidthString"),Ee.prototype),re(Ee.prototype,"labelWidthString",[A.computed],Object.getOwnPropertyDescriptor(Ee.prototype,"labelWidthString"),Ee.prototype),Ee);var xe=o.observer((function(e){var t=e.form,n=t.activeItem,a=n.id,r=n.itemType,l=t.activeItem.labelText;function i(e){t.update(e)}var u,o=function(e){return H.createElement(H.Fragment,null,H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"输入提示"),H.createElement(O,{className:"input",value:e.placeholder,onChange:function(t){return i(G({},e,{placeholder:t.target.value}))}})),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"默认值"),H.createElement(O,{className:"input",value:e.defaultValue,onChange:function(t){return i(G({},e,{defaultValue:t.target.value}))}})))},s=function(e){var n=e.options;return H.createElement(H.Fragment,null,H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"选项"),H.createElement(B,{size:"small",itemLayout:"horizontal",dataSource:n,renderItem:function(n,a){return H.createElement(B.Item,{key:a},H.createElement("div",{className:"attr-item-option"},H.createElement(O,{value:n.value,onChange:function(n){t.updateOption(e.id,a,n.target.value)}}),H.createElement(c,{type:"danger",icon:"delete",className:"btn-delete-option",onClick:function(){return t.deleteOption(e.id,a)}},"删除")))}}),H.createElement(c,{type:"primary",onClick:function(){return t.addOption(e.id)},icon:"plus"},"添加选项")))},m=[z.INPUT,z.NUMBER,z.TEXTAREA,z.CHECKBOX,z.RADIO,z.SELECT].indexOf(r)>-1,d=[z.INPUT,z.TEXTAREA,z.CHECKBOX,z.RADIO].indexOf(r)>-1;return H.createElement("div",{className:"attrs"},H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"标识"),H.createElement(O,{className:"input",value:a,disabled:!0})),m?H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"标签文字"),H.createElement(O,{className:"input",value:l,onChange:function(e){return i(G({},t.activeItem,{},{}))}})):null,r===z.INPUT?o(t.activeItem):null,r===z.NUMBER?(u=t.activeItem,H.createElement(H.Fragment,null,H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"最小值"),H.createElement(v,{className:"input",value:u.min,onChange:function(e){return i(G({},u,{min:Number(e)}))}})),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"最大值"),H.createElement(v,{className:"input",value:u.max,onChange:function(e){return i(G({},u,{max:Number(e)}))}})),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"默认值"),H.createElement(v,{className:"input",value:u.defaultValue,min:u.min,max:u.max,onChange:function(e){return i(G({},u,{defaultValue:Number(e)}))}})),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"单位"),H.createElement(O,{className:"input",value:u.unit,onChange:function(e){return i(G({},u,{unit:e.target.value}))}})))):null,r===z.TEXTAREA?o(t.activeItem):null,r===z.CHECKBOX?s(t.activeItem):null,r===z.CHECKBOX?function(e){return H.createElement(H.Fragment,null,H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"默认值"),H.createElement(h,{mode:"tags",value:e.defaultValue,style:{width:"100%"},onChange:function(n){return t.setCheckboxDefaultOption(e.id,n)}},e.options.map((function(e,t){return H.createElement(h.Option,{key:t,value:e.value},e.value)})))))}(t.activeItem):null,r===z.RADIO?s(t.activeItem):null,r===z.RADIO?function(e){return H.createElement(H.Fragment,null,H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"默认值"),H.createElement(h,{value:e.defaultValue,style:{width:"100%"},onChange:function(n){return t.setRadioDefaultOption(e.id,n)}},e.options.map((function(e,t){return H.createElement(h.Option,{key:t,value:e.value},e.value)})))))}(t.activeItem):null,r===z.SELECT?s(t.activeItem):null,r===z.SELECT?function(e){return H.createElement(H.Fragment,null,H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"默认值"),H.createElement(h,{value:e.defaultValue,style:{width:"100%"},onChange:function(n){return t.setSelectDefaultOption(e.id,n)}},e.options.map((function(e,t){return H.createElement(h.Option,{key:t,value:e.value},e.value)})))))}(t.activeItem):null,r===z.LAYOUT?function(e){var n=e.rows;return H.createElement(H.Fragment,null,n.map((function(n,a){return H.createElement("div",{className:"attr-item",key:a},H.createElement("div",{className:"label"},"列宽"),H.createElement(B,{size:"small",itemLayout:"horizontal",dataSource:n,renderItem:function(n,r){return H.createElement(B.Item,{key:r},H.createElement("div",{className:"attr-item-option"},H.createElement(v,{className:"input",value:n.span,min:1,max:24,step:1,onChange:function(n){t.updateColSpan(e.id,a,r,Number(n))}}),H.createElement(c,{type:"danger",icon:"delete",className:"btn-delete-option",onClick:function(){return t.deleteCol(e.id,a,r)}},"删除")))}}),H.createElement(c,{type:"primary",onClick:function(){return t.addCol(e.id,a)},icon:"plus"},"添加列"))})))}(t.activeItem):null,r===z.TEXT?function(e){var n=e.id,a=e.content,r=e.fontSize,l=e.lineHeight,i=e.textAlign;return H.createElement(H.Fragment,null,H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"文字内容"),H.createElement(O.TextArea,{value:a,onChange:function(e){return t.updateTextItem(n,e.target.value,r,l,i)}})),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"文字大小"),H.createElement(v,{className:"input",value:r,min:12,max:100,step:1,onChange:function(e){return t.updateTextItem(n,a,Number(e),l,i)}})),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"文字行高"),H.createElement(v,{className:"input",value:l,min:12,max:100,step:1,onChange:function(e){return t.updateTextItem(n,a,r,Number(e),i)}})),H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"对齐方式"),H.createElement(h,{style:{width:"100%"},value:i,onChange:function(e){return t.updateTextItem(n,a,r,l,e)}},H.createElement(h.Option,{value:"left"},"左对齐"),H.createElement(h.Option,{value:"right"},"右对齐"),H.createElement(h.Option,{value:"center"},"居中"))))}(t.activeItem):null,d?function(e){return H.createElement(H.Fragment,null,H.createElement("div",{className:"attr-item"},H.createElement("div",{className:"label"},"是否必填"),H.createElement(N.Group,{value:e.required,onChange:function(n){return t.setRequired(e.id,n.target.value)}},H.createElement(N,{value:!0},"必填"),H.createElement(N,{value:!1},"选填"))))}(t.activeItem):null)})),Ae=P.TabPane,we=function(e){Y(n,e);var t=ee(n);function n(){var e;V(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).onChangeTab=function(e){},e}return K(n,[{key:"render",value:function(){return H.createElement(P,{onChange:this.onChangeTab,animated:!1},H.createElement(Ae,{tab:"字段属性",key:"field-attrs"},H.createElement(xe,{form:ie})),H.createElement(Ae,{tab:"表单属性",key:"form-attrs"},H.createElement(Ne,{formAttrs:Ce})))}}]),n}(H.Component);var ke=o.observer((function(e){var t=e.formItem,r=e.formItemIndex,l=e.moveFormItem,i=n.useRef(null),u=te(a.useDrop({accept:[me],hover:function(e,t){if(null!==i.current){var n=e.index,a=r;if(n!==a){var u=i.current.getBoundingClientRect(),c=(u.bottom-u.top)/2,o=t.getClientOffset();if(null!==o){var s=o.y-u.top;n<a&&s<c||n>a&&s>c||(l(n,a),e.index=a)}}}}}),2)[1],o=te(a.useDrag({item:{index:r,type:me},collect:function(e){return{isDragging:e.isDragging()}}}),2),s=o[0].isDragging;return(0,o[1])(u(i)),t.itemType===z.LAYOUT?H.createElement("div",{ref:i,className:I("field-editable field-editable-layout",t.isActive?"field-editable-active":""),style:{opacity:s?.4:1},onMouseDown:function(){return ie.activate(t.id)}},t.rows.map((function(e,t){return H.createElement(R,{key:t,gutter:5},e.map((function(e,t){return H.createElement(j,{key:t,span:e.span})})))})),H.createElement(c,{className:"btn-delete",type:"danger",size:"small",icon:"delete",onClick:function(){return ie.delete(t.id)}},"删除")):t.itemType===z.TEXT?H.createElement("div",{ref:i,className:I("field-editable field-editable-text",t.isActive?"field-editable-active":""),style:{opacity:s?.4:1},onMouseDown:function(){return ie.activate(t.id)}},H.createElement("div",{style:{fontSize:t.fontSize,lineHeight:"".concat(t.lineHeight,"px"),textAlign:t.textAlign}},t.content),H.createElement(c,{className:"btn-delete",type:"danger",size:"small",icon:"delete",onClick:function(){return ie.delete(t.id)}},"删除")):H.createElement("div",{ref:i,className:I("field-editable","top"===Ce.labelAlign?"label-standalone":"",t.isActive?"field-editable-active":""),style:{opacity:s?.4:1},onMouseDown:function(){return ie.activate(t.id)}},H.createElement("div",{className:I("field-editable-label","top"===Ce.labelAlign?"field-standalone":""),style:G({width:Ce.labelWidth},"top"!==Ce.labelAlign?{textAlign:Ce.labelAlign}:{})},t.labelText),H.createElement("div",{className:"field-editable-content"},function(e){switch(e.itemType){case z.RESULT:return H.createElement("div",null,H.createElement(N.Group,{value:"合格",style:{height:32,lineHeight:"32px",marginBottom:16}},H.createElement(N,{value:"合格"},"合格"),H.createElement(N,{value:"不合格"},"不合格")),H.createElement(O.TextArea,{value:"",placeholder:"备注"}));case z.SELECT:var t=e;return H.createElement(h,{value:t.defaultValue,style:{width:"100%"}},t.options.map((function(e,t){return H.createElement(h.Option,{key:t,value:e.value},e.text)})));case z.CHECKBOX:var n=e;return H.createElement(E.Group,{value:n.defaultValue},n.options.map((function(e,t){return H.createElement(E,{key:t,value:e.value},e.text)})));case z.RADIO:var a=e;return H.createElement(N.Group,{value:a.defaultValue,buttonStyle:a.buttonStyle},a.options.map((function(e,t){return H.createElement(N.Button,{key:t,value:e.value},e.text)})));case z.TEXTAREA:var r=e;return H.createElement(O.TextArea,{value:r.defaultValue,placeholder:r.placeholder});case z.NUMBER:var l=e;return H.createElement(v,{style:{width:"100%"},value:l.defaultValue,formatter:function(e){return e?"".concat(e," ").concat(l.unit):"".concat(l.min," ").concat(l.unit)},parser:function(e){return Number(e?e.replace(" ".concat(l.unit),""):l.min)}});default:var i=e;return H.createElement(O,{value:i.defaultValue||"",placeholder:i.placeholder})}}(t)),H.createElement(c,{className:"btn-delete",type:"danger",size:"small",icon:"delete",onClick:function(){return ie.delete(t.id)}},"删除"))}));var Ie=o.observer((function(e){var t=e.formAttrs,r=e.form,l=n.useCallback((function(e,t){return r.move(e,t)}),[r.formItems]),i=te(a.useDrop({accept:[se],drop:function(e,t){e.type===se&&r.add(e.name)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),2),u=i[0],c=(u.isOver,u.canDrop,i[1]);return H.createElement("div",{ref:c,className:"editable-form",style:{width:t.formWidthString}},r.formItems.map((function(e,t){return H.createElement(ke,{key:e.id,formItem:e,formItemIndex:t,moveFormItem:l})})))})),Se=t.Header,Re=t.Content,De=t.Sider;return function(e){var l=e.style,i=e.defaultFormItems,u=void 0===i?[]:i,c=e.defaultFormAttrs,o=e.onSave,s=void 0===o?console.log:o;return n.useEffect((function(){ie.setItems(u),c&&Ce.reset(c)}),[]),H.createElement(a.DndProvider,{backend:r},H.createElement(t,{className:"form-editor",style:l},H.createElement(De,{theme:"light",className:"form-editor-components"},H.createElement(ye,null)),H.createElement(t,{className:"form-editor-content"},H.createElement(t,{className:"form-editor-content-main"},H.createElement(Se,{className:"form-editor-toolbar"},H.createElement(oe,{formAttrs:Ce,form:ie,onSave:s})),H.createElement(Re,{className:"form-editor-editarea"},H.createElement(Ie,{formAttrs:Ce,form:ie}))),H.createElement(De,{theme:"light",width:300,className:"form-editor-content-attrs"},H.createElement(we,null)))))}}));
