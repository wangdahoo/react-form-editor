!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("antd/es/layout/style/css"),require("antd/es/layout"),require("react"),require("react-dnd"),require("react-dnd-html5-backend"),require("antd/es/modal/style/css"),require("antd/es/modal"),require("antd/es/button/style/css"),require("antd/es/button"),require("mobx-react"),require("antd/es/divider/style/css"),require("antd/es/divider"),require("antd/es/empty/style/css"),require("antd/es/empty"),require("antd/es/input-number/style/css"),require("antd/es/input-number"),require("antd/es/checkbox/style/css"),require("antd/es/checkbox"),require("antd/es/select/style/css"),require("antd/es/select"),require("antd/es/input/style/css"),require("antd/es/input"),require("antd/es/radio/style/css"),require("antd/es/radio"),require("antd/es/message/style/css"),require("antd/es/message"),require("mobx"),require("shortid"),require("immutability-helper"),require("classnames"),require("antd/es/row/style/css"),require("antd/es/row"),require("antd/es/col/style/css"),require("antd/es/col"),require("antd/es/tabs/style/css"),require("antd/es/tabs"),require("antd/es/list/style/css"),require("antd/es/list")):"function"==typeof define&&define.amd?define(["antd/es/layout/style/css","antd/es/layout","react","react-dnd","react-dnd-html5-backend","antd/es/modal/style/css","antd/es/modal","antd/es/button/style/css","antd/es/button","mobx-react","antd/es/divider/style/css","antd/es/divider","antd/es/empty/style/css","antd/es/empty","antd/es/input-number/style/css","antd/es/input-number","antd/es/checkbox/style/css","antd/es/checkbox","antd/es/select/style/css","antd/es/select","antd/es/input/style/css","antd/es/input","antd/es/radio/style/css","antd/es/radio","antd/es/message/style/css","antd/es/message","mobx","shortid","immutability-helper","classnames","antd/es/row/style/css","antd/es/row","antd/es/col/style/css","antd/es/col","antd/es/tabs/style/css","antd/es/tabs","antd/es/list/style/css","antd/es/list"],t):(e=e||self).ReactFormEditor=t(null,e._Layout,e.React,e.ReactDnD,e.ReactDnDHTML5Backend,null,e._Modal,null,e._Button,e.mobxReact,null,e._Divider,null,e._Empty,null,e._InputNumber,null,e._Checkbox,null,e._Select,null,e._Input,null,e._Radio,null,e._message,e.mobx,e.shortid,e.update,e.classnames,null,e._Row,null,e._Col,null,e._Tabs,null,e._List)}(this,(function(e,t,n,r,a,i,l,o,s,c,u,m,d,f,p,v,h,y,E,b,g,k,O,T,C,w,N,x,A,S,I,D,P,R,j,q,U,B){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var L,X="default"in n?n.default:n;function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?Y(e):t}function $(e){return function(){var t,n=K(e);if(G()){var r=K(this).constructor;t=Reflect.construct(n,arguments,r)}else t=n.apply(this,arguments);return J(this,t)}}function Q(e,t){return ee(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,i=void 0;try{for(var l,o=e[Symbol.iterator]();!(r=(l=o.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{r||null==o.return||o.return()}finally{if(a)throw i}}return n}(e,t)||te(e,t)||re()}function Z(e){return ee(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||te(e)||re()}function ee(e){if(Array.isArray(e))return e}function te(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ae(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function ie(e,t,n,r){var a=function(){(function(){return e});var e={elementsDefinitionOrder:[["method"],["field"]],initializeInstanceElements:function(e,t){["method","field"].forEach((function(n){t.forEach((function(t){t.kind===n&&"own"===t.placement&&this.defineClassElement(e,t)}),this)}),this)},initializeClassElements:function(e,t){var n=e.prototype;["method","field"].forEach((function(r){t.forEach((function(t){var a=t.placement;if(t.kind===r&&("static"===a||"prototype"===a)){var i="static"===a?e:n;this.defineClassElement(i,t)}}),this)}),this)},defineClassElement:function(e,t){var n=t.descriptor;if("field"===t.kind){var r=t.initializer;n={enumerable:n.enumerable,writable:n.writable,configurable:n.configurable,value:void 0===r?void 0:r.call(e)}}Object.defineProperty(e,t.key,n)},decorateClass:function(e,t){var n=[],r=[],a={static:[],prototype:[],own:[]};if(e.forEach((function(e){this.addElementPlacement(e,a)}),this),e.forEach((function(e){if(!se(e))return n.push(e);var t=this.decorateElement(e,a);n.push(t.element),n.push.apply(n,t.extras),r.push.apply(r,t.finishers)}),this),!t)return{elements:n,finishers:r};var i=this.decorateConstructor(n,t);return r.push.apply(r,i.finishers),i.finishers=r,i},addElementPlacement:function(e,t,n){var r=t[e.placement];if(!n&&-1!==r.indexOf(e.key))throw new TypeError("Duplicated element ("+e.key+")");r.push(e.key)},decorateElement:function(e,t){for(var n=[],r=[],a=e.decorators,i=a.length-1;i>=0;i--){var l=t[e.placement];l.splice(l.indexOf(e.key),1);var o=this.fromElementDescriptor(e),s=this.toElementFinisherExtras((0,a[i])(o)||o);e=s.element,this.addElementPlacement(e,t),s.finisher&&r.push(s.finisher);var c=s.extras;if(c){for(var u=0;u<c.length;u++)this.addElementPlacement(c[u],t);n.push.apply(n,c)}}return{element:e,finishers:r,extras:n}},decorateConstructor:function(e,t){for(var n=[],r=t.length-1;r>=0;r--){var a=this.fromClassDescriptor(e),i=this.toClassDescriptor((0,t[r])(a)||a);if(void 0!==i.finisher&&n.push(i.finisher),void 0!==i.elements){e=i.elements;for(var l=0;l<e.length-1;l++)for(var o=l+1;o<e.length;o++)if(e[l].key===e[o].key&&e[l].placement===e[o].placement)throw new TypeError("Duplicated element ("+e[l].key+")")}}return{elements:e,finishers:n}},fromElementDescriptor:function(e){var t={kind:e.kind,key:e.key,placement:e.placement,descriptor:e.descriptor};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),"field"===e.kind&&(t.initializer=e.initializer),t},toElementDescriptors:function(e){if(void 0!==e)return Z(e).map((function(e){var t=this.toElementDescriptor(e);return this.disallowProperty(e,"finisher","An element descriptor"),this.disallowProperty(e,"extras","An element descriptor"),t}),this)},toElementDescriptor:function(e){var t=String(e.kind);if("method"!==t&&"field"!==t)throw new TypeError('An element descriptor\'s .kind property must be either "method" or "field", but a decorator created an element descriptor with .kind "'+t+'"');var n=ae(e.key),r=String(e.placement);if("static"!==r&&"prototype"!==r&&"own"!==r)throw new TypeError('An element descriptor\'s .placement property must be one of "static", "prototype" or "own", but a decorator created an element descriptor with .placement "'+r+'"');var a=e.descriptor;this.disallowProperty(e,"elements","An element descriptor");var i={kind:t,key:n,placement:r,descriptor:Object.assign({},a)};return"field"!==t?this.disallowProperty(e,"initializer","A method descriptor"):(this.disallowProperty(a,"get","The property descriptor of a field descriptor"),this.disallowProperty(a,"set","The property descriptor of a field descriptor"),this.disallowProperty(a,"value","The property descriptor of a field descriptor"),i.initializer=e.initializer),i},toElementFinisherExtras:function(e){return{element:this.toElementDescriptor(e),finisher:ue(e,"finisher"),extras:this.toElementDescriptors(e.extras)}},fromClassDescriptor:function(e){var t={kind:"class",elements:e.map(this.fromElementDescriptor,this)};return Object.defineProperty(t,Symbol.toStringTag,{value:"Descriptor",configurable:!0}),t},toClassDescriptor:function(e){var t=String(e.kind);if("class"!==t)throw new TypeError('A class descriptor\'s .kind property must be "class", but a decorator created a class descriptor with .kind "'+t+'"');this.disallowProperty(e,"key","A class descriptor"),this.disallowProperty(e,"placement","A class descriptor"),this.disallowProperty(e,"descriptor","A class descriptor"),this.disallowProperty(e,"initializer","A class descriptor"),this.disallowProperty(e,"extras","A class descriptor");var n=ue(e,"finisher");return{elements:this.toElementDescriptors(e.elements),finisher:n}},runClassFinishers:function(e,t){for(var n=0;n<t.length;n++){var r=(0,t[n])(e);if(void 0!==r){if("function"!=typeof r)throw new TypeError("Finishers must return a constructor.");e=r}}return e},disallowProperty:function(e,t,n){if(void 0!==e[t])throw new TypeError(n+" can't have a ."+t+" property.")}};return e}();if(r)for(var i=0;i<r.length;i++)a=r[i](a);var l=t((function(e){a.initializeInstanceElements(e,o.elements)}),n),o=a.decorateClass(function(e){for(var t=[],n=function(e){return"method"===e.kind&&e.key===i.key&&e.placement===i.placement},r=0;r<e.length;r++){var a,i=e[r];if("method"===i.kind&&(a=t.find(n)))if(ce(i.descriptor)||ce(a.descriptor)){if(se(i)||se(a))throw new ReferenceError("Duplicated methods ("+i.key+") can't be decorated.");a.descriptor=i.descriptor}else{if(se(i)){if(se(a))throw new ReferenceError("Decorators can't be placed on different accessors with for the same property ("+i.key+").");a.decorators=i.decorators}oe(i,a)}else t.push(i)}return t}(l.d.map(le)),e);return a.initializeClassElements(l.F,o.elements),a.runClassFinishers(l.F,o.finishers)}function le(e){var t,n=ae(e.key);"method"===e.kind?t={value:e.value,writable:!0,configurable:!0,enumerable:!1}:"get"===e.kind?t={get:e.value,configurable:!0,enumerable:!1}:"set"===e.kind?t={set:e.value,configurable:!0,enumerable:!1}:"field"===e.kind&&(t={configurable:!0,writable:!0,enumerable:!0});var r={kind:"field"===e.kind?"field":"method",key:n,placement:e.static?"static":"field"===e.kind?"own":"prototype",descriptor:t};return e.decorators&&(r.decorators=e.decorators),"field"===e.kind&&(r.initializer=e.value),r}function oe(e,t){void 0!==e.descriptor.get?t.descriptor.get=e.descriptor.get:t.descriptor.set=e.descriptor.set}function se(e){return e.decorators&&e.decorators.length}function ce(e){return void 0!==e&&!(void 0===e.value&&void 0===e.writable)}function ue(e,t){var n=e[t];if(void 0!==n&&"function"!=typeof n)throw new TypeError("Expected '"+t+"' to be a function");return n}a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a,l=l&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l,s=s&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s,m=m&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m,f=f&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f,v=v&&Object.prototype.hasOwnProperty.call(v,"default")?v.default:v,y=y&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y,b=b&&Object.prototype.hasOwnProperty.call(b,"default")?b.default:b,k=k&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k,T=T&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T,w=w&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w,A=A&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A,S=S&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S,D=D&&Object.prototype.hasOwnProperty.call(D,"default")?D.default:D,R=R&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R,q=q&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q,B=B&&Object.prototype.hasOwnProperty.call(B,"default")?B.default:B,function(e){e.TEXT="text",e.INPUT="input",e.NUMBER="number",e.TEXTAREA="textarea",e.CHECKBOX="checkbox",e.RADIO="radio",e.SELECT="select",e.LAYOUT="layout",e.RESULT="result"}(L||(L={}));var me=function(e){return{value:e,text:e}};var de=new(ie(null,(function(e){return{F:function t(){W(this,t),e(this)},d:[{kind:"field",decorators:[N.observable],key:"items",value:function(){return[]}},{kind:"field",decorators:[N.observable],key:"activeId",value:function(){return""}},{kind:"method",key:"setItems",value:function(e){this.items=e,this.activeId=""}},{kind:"method",key:"getItems",value:function(){return this.items.slice(0)}},{kind:"method",key:"add",value:function(e){if(e===L.RESULT&&this.items.filter((function(e){return e.itemType===L.RESULT})).length>0)w.error("检验结果字段只能有一个");else{var t=function(e){var t=x.generate();switch(e){case L.RESULT:return{id:t,itemType:e,labelText:"检验结果"};case L.TEXT:return{id:t,itemType:e,content:"文字内容",fontSize:14,lineHeight:21,textAlign:"left"};case L.LAYOUT:return{id:t,itemType:e,rows:[[{span:12},{span:12}]]};case L.SELECT:return{id:t,itemType:e,labelText:"下拉选择框",options:[me("选项 1"),me("选项 2"),me("选项 3")],defaultValue:"选项 1"};case L.RADIO:return{id:t,itemType:e,labelText:"单选框",options:[me("选项 1"),me("选项 2")],buttonStyle:"solid",defaultValue:"",required:!0};case L.CHECKBOX:return{id:t,itemType:e,labelText:"多选框",options:[me("选项 1")],defaultValue:[],required:!0};case L.TEXTAREA:return{id:t,itemType:e,labelText:"文本域",placeholder:"文本域输入提示",defaultValue:"",required:!0};case L.NUMBER:return{id:t,itemType:e,labelText:"数字框",defaultValue:1,min:1,max:100,unit:""};default:return{id:t,itemType:L.INPUT,labelText:"文本框",placeholder:"文本框输入提示",defaultValue:"",required:!0}}}(e);this.items.push(t)}}},{kind:"method",key:"delete",value:function(e){this.items=this.items.filter((function(t){return t.id!==e}))}},{kind:"method",key:"update",value:function(e){this.items=this.items.map((function(t){return t.id===e.id?e:t}))}},{kind:"method",key:"activate",value:function(e){this.items.filter((function(t){return t.id===e})).length>0&&(this.activeId=e)}},{kind:"method",key:"move",value:function(e,t){var n=this.items[e];this.items=A(this.items,{$splice:[[e,1],[t,0,n]]})}},{kind:"method",key:"addOption",value:function(e){this.items=this.items.map((function(t){if(t.id===e&&[L.CHECKBOX,L.RADIO,L.SELECT].indexOf(t.itemType)>-1){t.options.push(me(""))}return t}))}},{kind:"method",key:"deleteOption",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&[L.CHECKBOX,L.RADIO,L.SELECT].indexOf(n.itemType)>-1&&(n.options.length>1?(n.options.splice(t,1),L.SELECT===n.itemType&&(n.defaultValue=n.options[0].value),L.CHECKBOX===n.itemType&&(n.defaultValue=[]),L.RADIO===n.itemType&&(n.defaultValue="")):w.error("选项不得少于 1 个")),n}))}},{kind:"method",key:"updateOption",value:function(e,t,n){this.items=this.items.map((function(r){return r.id===e&&[L.CHECKBOX,L.RADIO,L.SELECT].indexOf(r.itemType)>-1&&r.options.splice(t,1,me(n)),r}))}},{kind:"method",key:"setCheckboxDefaultOption",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&L.CHECKBOX===n.itemType&&(n.defaultValue=t),n}))}},{kind:"method",key:"setRadioDefaultOption",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&L.RADIO===n.itemType&&(n.defaultValue=t),n}))}},{kind:"method",key:"setSelectDefaultOption",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&L.SELECT===n.itemType&&(n.defaultValue=t),n}))}},{kind:"method",key:"addCol",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&L.LAYOUT===n.itemType&&n.rows[t].push({span:12}),n}))}},{kind:"method",key:"updateColSpan",value:function(e,t,n,r){this.items=this.items.map((function(a){return a.id===e&&L.LAYOUT===a.itemType&&a.rows[t].splice(n,1,{span:r}),a}))}},{kind:"method",key:"deleteCol",value:function(e,t,n){this.items=this.items.map((function(r){return r.id===e&&L.LAYOUT===r.itemType&&r.rows[t].splice(n,1),r}))}},{kind:"method",key:"updateTextItem",value:function(e,t,n,r,a){this.items=this.items.map((function(i){return i.id===e&&L.TEXT===i.itemType&&(i.content=t,i.fontSize=n,i.lineHeight=r,i.textAlign=a),i}))}},{kind:"method",key:"setRequired",value:function(e,t){this.items=this.items.map((function(n){return n.id===e&&(n.required=t),n}))}},{kind:"get",key:"formItems",value:function(){var e=this;return this.items.map((function(t){return F({},t,{isActive:t.id===e.activeId})}))}},{kind:"get",key:"activeItem",value:function(){return function(e,t){for(var n=null,r=0,a=e.length;r<a;r++){var i=e[r];if(i.id===t){n=i;break}}return n||{}}(this.items,this.activeId)}}]}}))),fe=function(e){return{values:e.reduce((function(e,t){return[L.INPUT,L.TEXTAREA,L.RADIO,L.CHECKBOX,L.SELECT].indexOf(t.itemType)>-1?F({},e,z({},t.id,t.defaultValue)):e}),{}),result:-1,comment:""}};function pe(e){var t=e.form,r=t.items,a=t.attrs,i=a.formWidth,l=a.formWidthUnit,o=a.labelAlign,c=a.labelWidth,u=Q(n.useState(fe(r)),2),d=u[0],p=u[1],h=Q(n.useState({result:!1,errors:{}}),2),E=h[0],g=h[1],O=Q(n.useState(0),2),C=O[0],w=O[1];return 0===r.length?X.createElement(f,null):X.createElement("div",{className:"generated-form",style:{width:"".concat(i).concat(l)}},r.map((function(e,t){var n=e.itemType;if(n===L.TEXT){var r=e;return X.createElement("div",{key:t,className:"form-item form-item-text",style:{fontSize:r.fontSize,lineHeight:"".concat(r.lineHeight,"px"),textAlign:r.textAlign}},X.createElement("div",{className:"form-item-label"},r.content))}if([L.INPUT,L.NUMBER,L.TEXTAREA,L.RADIO,L.CHECKBOX,L.SELECT,L.RESULT].indexOf(n)>-1){var a=E.errors[e.id];return X.createElement("div",{className:"form-item",key:t},X.createElement("div",{className:S("form-item-label","top"===o?"label-standalone":""),style:F({width:c},"top"!==o?{textAlign:o}:{})},e.labelText),X.createElement("div",{className:"form-item-content"},function(e){switch(e.itemType){case L.RESULT:return X.createElement("div",null,X.createElement(T.Group,{style:{height:32,lineHeight:"32px",marginBottom:16},value:d.result,onChange:function(e){return p(F({},d,{result:e.target.value}))}},X.createElement(T,{value:1},"合格"),X.createElement(T,{value:0},"不合格"),X.createElement("span",{className:"err-msg"},C>0&&-1===d.result?"检验结果为必填项":"")),X.createElement(k.TextArea,{placeholder:"备注",value:d.comment,onChange:function(e){return p(F({},d,{comment:e.target.value}))}}));case L.SELECT:var t=e;return X.createElement(b,{value:d.values[t.id],onChange:function(e){var n=d.values;p(F({},d,{values:F({},n,z({},t.id,e))}))},style:{width:"100%"}},t.options.map((function(e,t){return X.createElement(b.Option,{key:t,value:e.value},e.text)})));case L.CHECKBOX:var n=e;return X.createElement(y.Group,{value:d.values[n.id],onChange:function(e){var t=d.values;p(F({},d,{values:F({},t,z({},n.id,e))}))}},n.options.map((function(e,t){return X.createElement(y,{key:t,value:e.value},e.text)})));case L.RADIO:var r=e;return X.createElement(T.Group,{value:d.values[r.id],onChange:function(e){var t=d.values;p(F({},d,{values:F({},t,z({},r.id,e.target.value))}))},buttonStyle:r.buttonStyle},r.options.map((function(e,t){return X.createElement(T.Button,{key:t,value:e.value},e.text)})));case L.TEXTAREA:var a=e;return X.createElement(k.TextArea,{value:d.values[a.id],onChange:function(e){var t=d.values;p(F({},d,{values:F({},t,z({},a.id,e.target.value))}))},placeholder:a.placeholder});case L.NUMBER:var i=e;return X.createElement(v,{style:{width:"100%"},value:d.values[i.id],onChange:function(e){e=e||i.min;var t=d.values;p(F({},d,{values:F({},t,z({},i.id,e))}))},min:i.min,max:i.max,formatter:function(e){return e?"".concat(e," ").concat(i.unit):"".concat(i.min," ").concat(i.unit)},parser:function(e){return Number(e?e.replace(" ".concat(i.unit),""):i.min)}});default:var l=e;return X.createElement(k,{value:d.values[l.id],onChange:function(e){var t=d.values;p(F({},d,{values:F({},t,z({},l.id,e.target.value))}))},placeholder:l.placeholder})}}(e),X.createElement("div",{className:"err-msg"},a)))}return null})),X.createElement(m,null),X.createElement("div",{style:{paddingLeft:c}},X.createElement(s,{type:"primary",onClick:function(){console.log("form items =>",r),console.log("form values =>",d);var t=function(e,t){var n=t.values;return e.reduce((function(e,r){var a=e.result,i=e.errors;if(function(e){return[L.INPUT,L.TEXTAREA,L.CHECKBOX,L.RADIO].indexOf(e.itemType)>-1}(r)&&r.required){var l=r,o=l.id,s=l.labelText,c=n[o];("string"==typeof c&&""===c||"[object Array]"===Object.prototype.toString.call(c)&&0===c.length)&&(i[o]="".concat(s,"为必填项"),a=!1)}return r.itemType===L.RESULT&&t.result,{result:a,errors:i}}),{result:!1,errors:{}})}(r,d);console.log(t),t.result?(e.onSubmit&&e.onSubmit(d),g({result:!1,errors:{}}),p(fe(r))):g(t),w(C+1)},style:{width:90,marginRight:16}},"提 交"),X.createElement(s,{type:"default",onClick:function(){return p(fe(r))},style:{width:90}},"重 置")))}var ve=c.observer((function(e){var t=e.form,r=e.formAttrs,a=e.onSave,i=Q(n.useState(!1),2),o=i[0],c=i[1],u=function(){return JSON.stringify({items:t.getItems(),attrs:r})};return X.createElement("div",{className:"form-editor-toolbar-content"},X.createElement(s,{type:"link",icon:"eye",onClick:function(){c(!0)}},"预览"),X.createElement(s,{type:"link",icon:"save",onClick:function(){return a(u())}},"保存"),X.createElement(l,{title:"表单预览",centered:!0,visible:o,onCancel:function(){return c(!1)},footer:null,width:800},o?X.createElement(pe,{form:JSON.parse(u())}):null))})),he="field",ye="eidtable_field";var Ee=c.observer((function(e){var t=e.name,n=e.text,a=Q(r.useDrag({item:{name:t,type:he},collect:function(e){return{isDragging:e.isDragging()}}}),2),i=a[0].isDragging,l=a[1];return X.createElement("div",{ref:l,className:"field",style:{opacity:i?.4:1}},n)})),be=[{name:"input",text:"文本框"},{name:"number",text:"数字框"},{name:"textarea",text:"文本域"},{name:"radio",text:"单选框"},{name:"checkbox",text:"多选框"},{name:"select",text:"下拉选择框"},{name:"text",text:"文字"}],ge=[{name:"result",text:"检验结果"}];function ke(){var e=function(e,t){return X.createElement("div",null,X.createElement("div",{className:"label"},e),t.map((function(e,t,n){if(t%2==0){var r=n.slice(t,t+2);return X.createElement(D,{gutter:10,key:t},r.map((function(e,n){return X.createElement(R,{span:12,key:"".concat(t,"-").concat(n)},X.createElement(Ee,{name:e.name,text:e.text}))})))}return null})))};return X.createElement(X.Fragment,null,e("通用字段",be),e("自定义字段",ge))}var Oe=ie([c.observer],(function(e,t){return{F:function(t){_(r,t);var n=$(r);function r(){var t;W(this,r);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return t=n.call.apply(n,[this].concat(i)),e(Y(t)),t}return r}(t),d:[{kind:"method",key:"render",value:function(){var e=this.props.formAttrs;return X.createElement("div",{className:"attrs"},X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"表单宽度"),X.createElement(v,{className:"input",value:e.formWidth,min:0,step:1,onChange:function(t){void 0!==t&&(e.formWidth=t)}})),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"表单宽度单位"),X.createElement(T.Group,{className:"input",value:e.formWidthUnit,buttonStyle:"solid",onChange:function(t){e.formWidthUnit=t.target.value}},X.createElement(T.Button,{value:"%"},"百分比 %"),X.createElement(T.Button,{value:"px"},"像素 px "))),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"标签宽度"),X.createElement(v,{className:"input",value:e.labelWidth,min:0,step:1,onChange:function(t){void 0!==t&&(e.labelWidth=t)}})),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"标签宽度单位"),X.createElement(T.Group,{className:"input",value:e.labelWidthUnit,buttonStyle:"solid",onChange:function(t){e.labelWidthUnit=t.target.value}},X.createElement(T.Button,{value:"%"},"百分比 %"),X.createElement(T.Button,{value:"px"},"像素 px "))),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"标签对齐方式"),X.createElement(T.Group,{className:"input",value:e.labelAlign,buttonStyle:"solid",onChange:function(t){e.labelAlign=t.target.value}},X.createElement(T.Button,{value:"left"},"左对齐"),X.createElement(T.Button,{value:"right"},"右对齐"),X.createElement(T.Button,{value:"top"},"顶部对齐"))))}}]}}),X.Component),Te=new(ie(null,(function(e){return{F:function t(){W(this,t),e(this)},d:[{kind:"field",decorators:[N.observable],key:"formWidth",value:function(){return 100}},{kind:"field",decorators:[N.observable],key:"formWidthUnit",value:function(){return"%"}},{kind:"field",decorators:[N.observable],key:"labelAlign",value:function(){return"left"}},{kind:"field",decorators:[N.observable],key:"labelWidth",value:function(){return 100}},{kind:"field",decorators:[N.observable],key:"labelWidthUnit",value:function(){return"px"}},{kind:"get",decorators:[N.computed],key:"formWidthString",value:function(){return"".concat(this.formWidth).concat(this.formWidthUnit)}},{kind:"get",decorators:[N.computed],key:"labelWidthString",value:function(){return"".concat(this.labelWidth).concat(this.labelWidthUnit)}},{kind:"method",key:"reset",value:function(e){this.formWidth=e.formWidth||100,this.labelAlign=e.labelAlign||"left",this.labelWidth=e.labelWidth||100,this.labelWidthUnit=e.labelWidthUnit||"px"}}]}})));var Ce=c.observer((function(e){var t=e.form,n=t.activeItem,r=n.id,a=n.itemType,i=t.activeItem.labelText;function l(e){t.update(e)}var o,c=function(e){return X.createElement(X.Fragment,null,X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"输入提示"),X.createElement(k,{className:"input",value:e.placeholder,onChange:function(t){return l(F({},e,{placeholder:t.target.value}))}})),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"默认值"),X.createElement(k,{className:"input",value:e.defaultValue,onChange:function(t){return l(F({},e,{defaultValue:t.target.value}))}})))},u=function(e){var n=e.options;return X.createElement(X.Fragment,null,X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"选项"),X.createElement(B,{size:"small",itemLayout:"horizontal",dataSource:n,renderItem:function(n,r){return X.createElement(B.Item,{key:r},X.createElement("div",{className:"attr-item-option"},X.createElement(k,{value:n.value,onChange:function(n){t.updateOption(e.id,r,n.target.value)}}),X.createElement(s,{type:"danger",icon:"delete",className:"btn-delete-option",onClick:function(){return t.deleteOption(e.id,r)}},"删除")))}}),X.createElement(s,{type:"primary",onClick:function(){return t.addOption(e.id)},icon:"plus"},"添加选项")))},m=[L.INPUT,L.NUMBER,L.TEXTAREA,L.CHECKBOX,L.RADIO,L.SELECT].indexOf(a)>-1,d=[L.INPUT,L.TEXTAREA,L.CHECKBOX,L.RADIO].indexOf(a)>-1;return X.createElement("div",{className:"attrs"},X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"标识"),X.createElement(k,{className:"input",value:r,disabled:!0})),m?X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"标签文字"),X.createElement(k,{className:"input",value:i,onChange:function(e){return l(F({},t.activeItem,{},{}))}})):null,a===L.INPUT?c(t.activeItem):null,a===L.NUMBER?(o=t.activeItem,X.createElement(X.Fragment,null,X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"最小值"),X.createElement(v,{className:"input",value:o.min,onChange:function(e){return l(F({},o,{min:Number(e)}))}})),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"最大值"),X.createElement(v,{className:"input",value:o.max,onChange:function(e){return l(F({},o,{max:Number(e)}))}})),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"默认值"),X.createElement(v,{className:"input",value:o.defaultValue,min:o.min,max:o.max,onChange:function(e){return l(F({},o,{defaultValue:Number(e)}))}})),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"单位"),X.createElement(k,{className:"input",value:o.unit,onChange:function(e){return l(F({},o,{unit:e.target.value}))}})))):null,a===L.TEXTAREA?c(t.activeItem):null,a===L.CHECKBOX?u(t.activeItem):null,a===L.CHECKBOX?function(e){return X.createElement(X.Fragment,null,X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"默认值"),X.createElement(b,{mode:"tags",value:e.defaultValue,style:{width:"100%"},onChange:function(n){return t.setCheckboxDefaultOption(e.id,n)}},e.options.map((function(e,t){return X.createElement(b.Option,{key:t,value:e.value},e.value)})))))}(t.activeItem):null,a===L.RADIO?u(t.activeItem):null,a===L.RADIO?function(e){return X.createElement(X.Fragment,null,X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"默认值"),X.createElement(b,{value:e.defaultValue,style:{width:"100%"},onChange:function(n){return t.setRadioDefaultOption(e.id,n)}},e.options.map((function(e,t){return X.createElement(b.Option,{key:t,value:e.value},e.value)})))))}(t.activeItem):null,a===L.SELECT?u(t.activeItem):null,a===L.SELECT?function(e){return X.createElement(X.Fragment,null,X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"默认值"),X.createElement(b,{value:e.defaultValue,style:{width:"100%"},onChange:function(n){return t.setSelectDefaultOption(e.id,n)}},e.options.map((function(e,t){return X.createElement(b.Option,{key:t,value:e.value},e.value)})))))}(t.activeItem):null,a===L.LAYOUT?function(e){var n=e.rows;return X.createElement(X.Fragment,null,n.map((function(n,r){return X.createElement("div",{className:"attr-item",key:r},X.createElement("div",{className:"label"},"列宽"),X.createElement(B,{size:"small",itemLayout:"horizontal",dataSource:n,renderItem:function(n,a){return X.createElement(B.Item,{key:a},X.createElement("div",{className:"attr-item-option"},X.createElement(v,{className:"input",value:n.span,min:1,max:24,step:1,onChange:function(n){t.updateColSpan(e.id,r,a,Number(n))}}),X.createElement(s,{type:"danger",icon:"delete",className:"btn-delete-option",onClick:function(){return t.deleteCol(e.id,r,a)}},"删除")))}}),X.createElement(s,{type:"primary",onClick:function(){return t.addCol(e.id,r)},icon:"plus"},"添加列"))})))}(t.activeItem):null,a===L.TEXT?function(e){var n=e.id,r=e.content,a=e.fontSize,i=e.lineHeight,l=e.textAlign;return X.createElement(X.Fragment,null,X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"文字内容"),X.createElement(k.TextArea,{value:r,onChange:function(e){return t.updateTextItem(n,e.target.value,a,i,l)}})),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"文字大小"),X.createElement(v,{className:"input",value:a,min:12,max:100,step:1,onChange:function(e){return t.updateTextItem(n,r,Number(e),i,l)}})),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"文字行高"),X.createElement(v,{className:"input",value:i,min:12,max:100,step:1,onChange:function(e){return t.updateTextItem(n,r,a,Number(e),l)}})),X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"对齐方式"),X.createElement(b,{style:{width:"100%"},value:l,onChange:function(e){return t.updateTextItem(n,r,a,i,e)}},X.createElement(b.Option,{value:"left"},"左对齐"),X.createElement(b.Option,{value:"right"},"右对齐"),X.createElement(b.Option,{value:"center"},"居中"))))}(t.activeItem):null,d?function(e){return X.createElement(X.Fragment,null,X.createElement("div",{className:"attr-item"},X.createElement("div",{className:"label"},"是否必填"),X.createElement(T.Group,{value:e.required,onChange:function(n){return t.setRequired(e.id,n.target.value)}},X.createElement(T,{value:!0},"必填"),X.createElement(T,{value:!1},"选填"))))}(t.activeItem):null)})),we=q.TabPane,Ne=function(e){_(i,e);var t,n,r,a=$(i);function i(){var e;W(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return z(Y(e=a.call.apply(a,[this].concat(n))),"onChangeTab",(function(e){})),e}return t=i,(n=[{key:"render",value:function(){return X.createElement(q,{onChange:this.onChangeTab,animated:!1},X.createElement(we,{tab:"字段属性",key:"field-attrs"},X.createElement(Ce,{form:de})),X.createElement(we,{tab:"表单属性",key:"form-attrs"},X.createElement(Oe,{formAttrs:Te})))}}])&&H(t.prototype,n),r&&H(t,r),i}(X.Component);var xe=c.observer((function(e){var t=e.formItem,a=e.formItemIndex,i=e.moveFormItem,l=n.useRef(null),o=Q(r.useDrop({accept:[ye],hover:function(e,t){if(null!==l.current){var n=e.index,r=a;if(n!==r){var o=l.current.getBoundingClientRect(),s=(o.bottom-o.top)/2,c=t.getClientOffset();if(null!==c){var u=c.y-o.top;n<r&&u<s||n>r&&u>s||(i(n,r),e.index=r)}}}}}),2)[1],c=Q(r.useDrag({item:{index:a,type:ye},collect:function(e){return{isDragging:e.isDragging()}}}),2),u=c[0].isDragging;return(0,c[1])(o(l)),t.itemType===L.LAYOUT?X.createElement("div",{ref:l,className:S("field-editable field-editable-layout",t.isActive?"field-editable-active":""),style:{opacity:u?.4:1},onMouseDown:function(){return de.activate(t.id)}},t.rows.map((function(e,t){return X.createElement(D,{key:t,gutter:5},e.map((function(e,t){return X.createElement(R,{key:t,span:e.span})})))})),X.createElement(s,{className:"btn-delete",type:"danger",size:"small",icon:"delete",onClick:function(){return de.delete(t.id)}},"删除")):t.itemType===L.TEXT?X.createElement("div",{ref:l,className:S("field-editable field-editable-text",t.isActive?"field-editable-active":""),style:{opacity:u?.4:1},onMouseDown:function(){return de.activate(t.id)}},X.createElement("div",{style:{fontSize:t.fontSize,lineHeight:"".concat(t.lineHeight,"px"),textAlign:t.textAlign}},t.content),X.createElement(s,{className:"btn-delete",type:"danger",size:"small",icon:"delete",onClick:function(){return de.delete(t.id)}},"删除")):X.createElement("div",{ref:l,className:S("field-editable","top"===Te.labelAlign?"label-standalone":"",t.isActive?"field-editable-active":""),style:{opacity:u?.4:1},onMouseDown:function(){return de.activate(t.id)}},X.createElement("div",{className:S("field-editable-label","top"===Te.labelAlign?"field-standalone":""),style:F({width:Te.labelWidth},"top"!==Te.labelAlign?{textAlign:Te.labelAlign}:{})},t.labelText),X.createElement("div",{className:"field-editable-content"},function(e){switch(e.itemType){case L.RESULT:return X.createElement("div",null,X.createElement(T.Group,{value:"合格",style:{height:32,lineHeight:"32px",marginBottom:16}},X.createElement(T,{value:"合格"},"合格"),X.createElement(T,{value:"不合格"},"不合格")),X.createElement(k.TextArea,{value:"",placeholder:"备注"}));case L.SELECT:var t=e;return X.createElement(b,{value:t.defaultValue,style:{width:"100%"}},t.options.map((function(e,t){return X.createElement(b.Option,{key:t,value:e.value},e.text)})));case L.CHECKBOX:var n=e;return X.createElement(y.Group,{value:n.defaultValue},n.options.map((function(e,t){return X.createElement(y,{key:t,value:e.value},e.text)})));case L.RADIO:var r=e;return X.createElement(T.Group,{value:r.defaultValue,buttonStyle:r.buttonStyle},r.options.map((function(e,t){return X.createElement(T.Button,{key:t,value:e.value},e.text)})));case L.TEXTAREA:var a=e;return X.createElement(k.TextArea,{value:a.defaultValue,placeholder:a.placeholder});case L.NUMBER:var i=e;return X.createElement(v,{style:{width:"100%"},value:i.defaultValue,formatter:function(e){return e?"".concat(e," ").concat(i.unit):"".concat(i.min," ").concat(i.unit)},parser:function(e){return Number(e?e.replace(" ".concat(i.unit),""):i.min)}});default:var l=e;return X.createElement(k,{value:l.defaultValue||"",placeholder:l.placeholder})}}(t)),X.createElement(s,{className:"btn-delete",type:"danger",size:"small",icon:"delete",onClick:function(){return de.delete(t.id)}},"删除"))}));var Ae=c.observer((function(e){var t=e.formAttrs,a=e.form,i=n.useCallback((function(e,t){return a.move(e,t)}),[a.formItems]),l=Q(r.useDrop({accept:[he],drop:function(e,t){e.type===he&&a.add(e.name)},collect:function(e){return{isOver:e.isOver(),canDrop:e.canDrop()}}}),2),o=l[0],s=(o.isOver,o.canDrop,l[1]);return X.createElement("div",{ref:s,className:"editable-form",style:{width:t.formWidthString}},a.formItems.map((function(e,t){return X.createElement(xe,{key:e.id,formItem:e,formItemIndex:t,moveFormItem:i})})))})),Se=t.Header,Ie=t.Content,De=t.Sider;return function(e){var i=e.style,l=e.defaultFormItems,o=void 0===l?[]:l,s=e.defaultFormAttrs,c=e.onSave,u=void 0===c?console.log:c;return n.useEffect((function(){de.setItems(o),s&&Te.reset(s)}),[]),X.createElement(r.DndProvider,{backend:a},X.createElement(t,{className:"form-editor",style:i},X.createElement(De,{theme:"light",className:"form-editor-components"},X.createElement(ke,null)),X.createElement(t,{className:"form-editor-content"},X.createElement(t,{className:"form-editor-content-main"},X.createElement(Se,{className:"form-editor-toolbar"},X.createElement(ve,{formAttrs:Te,form:de,onSave:u})),X.createElement(Ie,{className:"form-editor-editarea"},X.createElement(Ae,{formAttrs:Te,form:de}))),X.createElement(De,{theme:"light",width:300,className:"form-editor-content-attrs"},X.createElement(Ne,null)))))}}));
